  <% if params[:colour].present? || params[:size].present?  || params[:available].present? %>
    <div id="filterbox" class="container filter">
  <% else %>
    <div id="filterbox" class="container filter hidden">
  <% end %>
    <%= form_tag(pieces_path, method: "get", name: "list", id: "colour-form", remote: true ) do %>
      <!-- Method for available colours in the @pieces-->
      <% @colours_in_unfiltered_pieces.each do |colour| %>
      <% colours = params[:colour] %>
        <% if  colours && (colours[:colour].include? colour) %>
          <%= check_box_tag("colour[colour][]", colour, true, :onclick => "javascript: document.list.submit();") %>
        <% else %>
          <%= check_box_tag("colour[colour][]", colour, false, :onclick => "javascript: document.list.submit();") %>
        <% end %>
        <%= label_tag(:colour, colour) %>
      <% end %>
      <br />
      <% @sizes_in_unfiltered_pieces.each do |size| %>
        <% sizes = params[:size] %>
        <% if  sizes && (sizes[:size].include? size.to_s) %>
          <%= check_box_tag("size[size][]", size, true, :onclick => "javascript: document.list.submit();") %>
        <% else %>
          <%= check_box_tag("size[size][]", size, false, :onclick => "javascript: document.list.submit();") %>
        <% end %>
        <%= label_tag(:size, size) %>
      <% end %>
      <br />
        <% if  params.key?('available') && params[:available] == true.to_s %>
          <%= check_box_tag("available", true, true, :onclick => "javascript: document.list.submit();") %>
        <% else %>
          <%= check_box_tag("available", true, false, :onclick => "javascript: document.list.submit();") %>
        <% end %>
        <%= label_tag('Available now') %>
    <% end %>
  </div>
  <div class="container">
    <div class="filter_button">
      <a id="filter_button_link" href="#">Filter</a>
    </div>
  </div>
